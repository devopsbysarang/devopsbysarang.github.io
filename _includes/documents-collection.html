{%- comment -%}
  This is the modified documents-collection.html
  - It respects the flag `hide_recent_posts: true` passed from the page
  - If the flag is set, the posts will not render
{%- endcomment -%}

{% unless include.hide_recent_posts %}
  {% assign entries = include.entries | default: site[include.collection] | where_exp: "post", "post.hidden != true" %}

  {% if include.sort_by %}
    {% assign entries = entries | sort: include.sort_by %}
  {% endif %}

  {% if include.sort_order == 'reverse' %}
    {% assign entries = entries | reverse %}
  {% endif %}

  {%- for post in entries -%}
    {% include archive-single.html type=include.type %}
  {%- endfor -%}
{% endunless %}
